
<!DOCTYPE html>
<html lang="en">
{% block head %}
<head>
    {% block metatags %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" /> <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    {% endblock %}
    {% block title_space %}
    <title>{% block title_text %}Demo de carte autonome{% endblock %}</title>
    {% endblock %}
    {% block inclusions_css %}
    <!-- Bootstrap core CSS -->
    <link href="{{STATIC_URL}}dist/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{STATIC_URL}}dist/openlayers/ol.css" rel="stylesheet">
    <link href="{{STATIC_URL}}dist/ol3-popup/ol3-popup.css" rel="stylesheet">
    <link href="{{STATIC_URL}}dist/angular-openlayers-directive/angular-openlayers-directive.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{{STATIC_URL}}map.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="dist/ietrouble/html5shiv.min.js"></script>
      <script src="dist/ietrouble/respond.min.js"></script>
      <![endif]-->
    {% endblock %}
  </head>
{% endblock %}
{% block body %}
  <body>
    {% block navbar %}
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    {% block navbar_icons %}
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    {% endblock %}
                </button>
                {% block navbar_title %}
                <a class="navbar-brand" href="#">{% block navbar_title_text %}Carte des centres{% endblock %}</a>
                {% endblock %}
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    {% block navbar_links %}
                    {% endblock %}
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
    {% endblock %}
    {% block supercontainer %}
    <div class="container" ng-app="{% block ng_app_name %}standalonemap{% endblock %}" >
        {% block container %}
        <div class="row" ng-controller="defaultcontroller">
            <div class="col-md-8">
                <h2>Carte</h2>
                <openlayers lat="48.8567" lon="2.3508" zoom="5" height="400" custom-layers="true" ol-defaults="defaults">
                    <!--declare the tile layer. HERE REPLACE THE SOURCE-URL by something meaningful -->
                    <ol-layer source-type="OSM" source-url="http://dtserv.labscinet.com/~dt/demo/tiles/{z}/{x}/{y}.png"></ol-layer>
                    <!--
                    The important thing here is the ng-repeat="marker in markers" which is a angularJS macro which says: replicate the whiole ol-marker
                    html tag as many times as there are elements in the markers array (in the demo.js file)
                     -->
                    <ol-marker ng-repeat="marker in markers" ol-marker-properties="marker">
                        <div class="glyphicon glyphicon-remove" ng-click="close_marker(marker)"></div>
                        <div ng-bind-html="marker.label.details"></div>
                        En savoir plus sur <a href="#" ng-click='select_marker(marker)'>le centre EDF de {{marker.name}}</a>
                    </ol-marker>
                </openlayers>
            </div>
            <div class="col-md-4">
                <!--Notice the ng-if conditional expression -->
                <h2 ng-if="cur_marker">Explication de {{cur_marker.name}}</h2>
                <h2 ng-if="!cur_marker">Cliquez sur le marqueur sur la carte puis sur le lien dans l&#39;infobulle qui s&#39;affiche pour voir la description.</h2>

                <!--This macro says to output the cur_message variable, look at the select_marker function in demo.js -->   
                <p>{{cur_message}}</p>
                <img ng-if="cur_marker" src="{{STATIC_URL}}img/transfo.jpg" alt="transformateur" height="200" width="200" />
                <div ng-bind-html="cur_marker.label.details"></div>
            </div>
        </div>
        {% endblock %}
        <hr/>

        <footer >
        {% block footer %}
            <p>&copy; {% block copyright_text %}Labscinet 2015{% endblock %}</p>
        {% endblock %}
        </footer>

    </div><!-- /.container -->
    {% endblock %}
    {% block inclusions_js %}
    
    {% block inclusions_js_3rdparty %}
    <script src="{{STATIC_URL}}dist/jquery/jquery-1.11.2.min.js"></script>
    <script src="{{STATIC_URL}}dist/angular/angular.min.js"></script>
    <script src="{{STATIC_URL}}dist/angular/angular-sanitize.min.js"></script>
    <script src="{{STATIC_URL}}dist/bootstrap/js/bootstrap.min.js"></script>
    <script src="{{STATIC_URL}}dist/openlayers/ol.js"></script>
    <script src="{{STATIC_URL}}dist/ol3-popup/ol3-popup.js"></script>
    <script src="{{STATIC_URL}}dist/angular-openlayers-directive/angular-openlayers-directive.js"></script>
    {% endblock %}
    {% block inclusions_js_custom %}
    <script src="{{STATIC_URL}}map.js"></script>
    {% endblock %}
    {% endblock %}
</body>
{% endblock %}
</html>
